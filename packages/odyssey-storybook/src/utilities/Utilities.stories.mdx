import { Meta } from "@storybook/addon-docs/blocks";

<Meta title="Utilities/Utilities" />

# Utilities

## Box VS Text

In production docs, these sections will live with their appropriate utility. I've co-located them here, so that we can align internally.

### Box

`<Box />` acts as the root for most components. Prefer spreading omitted rest props and forwarding a ref to `<Box />` as well.

This component uses an `as="abbr"` polymorphic API to keep the DOM a11y compliant as well as clean and comprehensible by developers and their automated tests.

`<Box />` contains a minimal set of styles that are provided through inheritance to children (`font-family`) and provides an API for utility tailwind-esque styling (`padding`, `margin`).

These styles that are owned by `<Box />` are also a centralized place to apply theme-able odyssey design tokens for override (theming `font-family` "globally").

Going further, `<Box />` accepts a `className` prop for applying component-specific styling. This prevents the need for `<Box />` to define every style for all use cases. Additionally, parent component classes can contain their own theme-able tokens to keep things customizable.

A simple component like `<Button>` might look like this:

```html
<Box {...omitProps} ref="{ref}" as="button" className="{componentClass}">
  { label }
</Box>
```

**WIP API NOTE:** Can Box handle spreading props and the ref under the hood, so component authors wouldn't need to specify?

#### Global styles

Box includes these inheritable defaults:

- color: $text-body;
- font-family: $body-font-family;
- font-style: normal;
- font-weight: 400;
- letter-spacing: 0;
- line-height: $base-line-height;
- font-feature-settings: "lnum", "pnum";
- text-decoration-skip-ink: all;

Box includes these parent resets:

- box-sizing: border-box;
- margin-block: 0;
- margin-inline: 0;
- padding-block: 0;
- padding-inline: 0;
- border: 0;
- font: inherit;
- font-size: 100%;
- vertical-align: baseline;

Component-specific styling may override these defaults via `className`, as above.

Authors may specify in-situ variants to reset properties via utility props.

### Text

**WIP API NOTE:** Would anyone be opposed to renaming this component to `<StyledElement>` or similar?

`<Text />` is a convenience utility built with `<Box />`. It can provide its own hooks for customization and theme-able tokens as necessary.

#### Styled element insertion

`<Text />` enables authors and components to insert styled HTML5 elements without the need for a global CSS sheet.

```html
We <Text as="em">really</Text> need to get off this planet.
```

A more complicated example might look like this:

```html
<Text as="blockquote">
  <Text as="p">
    The important thing is not to stop questioning. Curiosity has its own reason
    for existence.
  </Text>
  <footer>
    Albert Einstein,
    <Text as="cite">
      Old Man's Advice to Youth: "Never Lose a Holy Curiosity," LIFE magazine (2
      May 1955) statement to William Miller, p. 64.
    </Text>
  </footer>
</Text>
```

####

**WIP API NOTE:** This next section is an additional use-case for `<Text />`.

In addition, `<Text />` provides a simpler API with indirect descendant selectors for natural HTML5 composition or styling dynamic content (e.g. from markdown).

```html
<Text>
  <blockquote>
    <p>
      The important thing is not to stop questioning. Curiosity has its own
      reason for existence.
    </p>
    <footer>
      Albert Einstein,
      <cite>
        Old Man's Advice to Youth: "Never Lose a Holy Curiosity," LIFE magazine
        (2 May 1955) statement to William Miller, p. 64.
      </cite>
    </footer>
  </blockquote>
</Text>
```

## Current Cases

Currently, we have a few open PRs that stand as practical examples for application of these utilities. Below, I've outlined my current understanding of what each component should look like, given these utilities.

### Field

```html
// Field

<Box as="{tag}" className="{styles.root}">
  <Field.Label
    inputId="{inputId}"
    required="{required}"
    optionalLabel="{optionalLabel}"
    labelHidden="{labelHidden}"
    as="{TagLabel}"
  >
    {label}
  </Field.Label>
  {hint && <Field.Hint id="{inputId}">{hint}</Field.Hint>} {children} {error &&
  <Field.Error id="{inputId}">{error}</Field.Error>}
</Box>

// Label //// In the case of these label elements, we can treat our Field
styling as the HTML5 default, removing the need for component-specific styling.

<Text as="{labelTag}" htmlFor="{inputId}">
  {children} {!required && optionalLabel && (
  <span className="{styles.optionalLabel}" children="{optionalLabel}" />
  )}
</Text>

// Hidden Label

<ScreenReaderText>
  <Text as="{labelTag}" htmlFor="{inputId}">
    {children} {!required && optionalLabel && (
    <span className="{styles.optionalLabel}" children="{optionalLabel}" />
    )}
  </Text>
</ScreenReaderText>

// Hint

<Box
  as="p"
  className="{styles.hint}"
  id="{`${id}-hint`}"
  children="{children}"
/>

// Error

<Box as="p" className="{styles.error}" id="{`${id}-error`}">{children} /> </Box>
```

### Heading

Much like `<Text />` is a convenience wrapper on top of `<Box />`, `<Heading />` is built on `<Text />`.

```html
// Heading

<Text as="{tag}" className="{componentClass}"> {children} </Text>
```

My assumption here is that all Headings have parity with our desired HTML5 defaults. The `className` would be used to apply a different level of visual hierarchy to a tag (an `h1` with the styles of an `h3`).

If a component requires heading styling that deviates farther than that, those styles should live with the component until they become a pattern.

### List

```html
// List

<Box as="{tag}"> { children } </Box>

//// `tag` here would be ul, ol, dl // ListItem

<Text as="{childTag}"> { children } </Text>
```

If `<List>` were only intended to be used in the fashion of plain HTML5, `<Text>` could probably be used throughout. e.g. `<Text as="ul">`. However, we've seen that `<List>` is likely to have more complicated functionality.

Alternately, using `<Text as="ul">` could provide default styling while `<List>` comes without assumed margins and padding.
