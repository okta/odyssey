import { ArgsTable, Canvas, Meta } from "@storybook/addon-docs";
import { Story } from "@storybook/blocks";
import * as Stories from "./Form.stories";
import * as TextFieldStories from "../TextField/TextField.stories";

<Meta title="MUI Components/Forms/Form" anchor />

# Form

The `Form` component arranges input controls to help with the layout and building of a form.

## Overview

Forms are used for submitting data so it is important for them to be easy to understand and easy to complete. There is generally not one simple way to create all forms but following basic usability guidelines can provide a good starting point.

<Canvas>
  <Story of={Stories.Simple} />
</Canvas>

## Content

`Form` supports the following sections:

### Form header

Forms should include a heading that describes the form. This heading may be provided by the form's context; for example, a modal or page's title.

An additional description can follow the heading.

<Canvas>
  <Story of={Stories.WithHeader} />
</Canvas>

### Field groups

Field groups allow you to group fields together within the same form.

Field groups should be labeled by a legend. They can also include descriptions.

<Canvas>
  <Story of={Stories.WithLegend} />
</Canvas>

### Form actions

This section houses buttons to allow the user to submit, clear, or exit the form.

## Best practices

### Length

In general, it is good for forms to be as simple and short as possible. Eliminating unnecessary fields will reduce user effort and translate to better completion rates.

Often in products like Okta, it will be difficult to avoid more complex forms for things like settings or configurations. In these cases based on context, it is an acceptable solution.

### Layout

The `Form` component is designed in a single-column layout to maintain a logical flow of completion.

Adding multiple columns in a form can generate confusion for users and lead to usability problems such as having more than one way to interpret the form and forcing users to reorient their eyes to different places in the form.

## Validation

### Error types

#### Form error

Some errors may occur at the highest level. For example, the server may be unable to process the submission.

In these cases, an `Infobox` should be added at the top of the form to increase visibility. This alert should persist until the relevant errors are resolved.

<Canvas>
  <Story of={Stories.WithFormError} />
</Canvas>

#### Field group error

When multiple input selections are incompatible, the whole group may be made invalid.

In this case, an `Infobox` should be inserted at the top of the field group. This alert should persist until all input errors are resolved.

<Canvas>
  <Story of={Stories.WithFieldGroupError} />
</Canvas>

#### Input error

Each input field within a form has its own error state that prevents a user from moving forward or completing a form.

<Canvas>
  <Story of={TextFieldStories.Error} />
</Canvas>

### Validation styles

Forms can validate in one of two ways. Even though Odyssey has suggestions on which one is preferable, both are acceptable, and choosing one is completely dependent on the product use case.

#### Client-side validation

Client-side validation is recommended when possible. It offers a better experience since errors can be displayed in real-time. For example, if a user enters an invalid email format, you can display an error message before the form is submitted.

Inline errors should not be displayed until input has lost its active or focus state, this way the user has an opportunity to finish filling out the field before an error message is shown.

#### Server-side validation

On the server side, validation occurs when the user submits their input fields via a button. The form is then sent to the server and If there are any errors the feedback is sent back to the client with the errors.

Form-level errors are most often detected at this level of validation.

## References and additional material

- Kathryn Whitenton (2016, May 1) [Website Forms Usability: Top 10 Recommendations](https://www.nngroup.com/articles/web-form-design/) - Nielsen Norman Group
- Matteo Penzo (2006, July 12) [Label Placement in Forms](https://www.uxmatters.com/mt/archives/2006/07/label-placement-in-forms.php) - UXmatters
- Edward Scott (2018, September 17) [Avoid Multi-Column Forms](https://baymard.com/blog/avoid-multi-column-forms) - Baymard Institute
