#!/bin/bash

set -e

export NODE_ENV="production"
export BROWSERSLIST_ENV="modern"
EXTENSIONS=".js,.jsx,.ts,.tsx"
BABEL_ARGS=(
  "src"
  "--out-dir dist"
  "--extensions ${EXTENSIONS}"
  "--source-maps"
)

[[ $1 == "--watch" ]] && BABEL_ARGS+=("--watch")

$(yarn bin)/babel ${BABEL_ARGS[@]}

exit 0;
